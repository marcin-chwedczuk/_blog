!function(){"use strict";function e(e){for(var t=[],n=0;n<e;n++){var o=new THREE.Color("hsl("+Math.floor(300*n/e)+", 50%, 50%)"),i=.2+.06*n,r=.08,a=.1;t.push(new s(r,i,a,o))}return t}function t(e,n){var o=n.from,i=n.to,r=n.using;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e<=1)){n.next=5;break}return n.next=3,{disc:1,from:o,to:i};case 3:n.next=9;break;case 5:return n.delegateYield(t(e-1,{from:o,to:r,using:i}),"t0",6);case 6:return n.next=8,{disc:e,from:o,to:i};case 8:return n.delegateYield(t(e-1,{from:r,to:i,using:o}),"t1",9);case 9:case"end":return n.stop()}},d[0],this)}var n=(function(){function e(e){this.value=e}function t(t){function n(e,t){return new Promise(function(n,i){var s={key:e,arg:t,resolve:n,reject:i,next:null};a?a=a.next=s:(r=a=s,o(e,t))})}function o(n,r){try{var a=t[n](r),s=a.value;s instanceof e?Promise.resolve(s.value).then(function(e){o("next",e)},function(e){o("throw",e)}):i(a.done?"return":"normal",a.value)}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}r=r.next,r?o(r.key,r.arg):a=null}var r,a;this._invoke=n,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},a=function(){function e(t){if(n(this,e),null==t)throw new Error("mesh cannot be null");this._mesh=t}return o(e,[{key:"addToScene",value:function(e){e.add(this._mesh),this._addToScene(e)}},{key:"_addToScene",value:function(e){}},{key:"position",value:function(e,t,n){return 0===arguments.length?this._mesh.position:(this._mesh.position.set(e,t,n),void this._positionChanged())}},{key:"_positionChanged",value:function(){}},{key:"rotate",value:function(e,t,n){this._mesh.rotation.set(e,t,n),this._rotationChanged()}},{key:"_rotationChanged",value:function(){}}]),e}(),s=function(e){function t(e,o,i,a){n(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t._createMesh(e,o,i,a)));return s._height=i,s}return i(t,e),o(t,[{key:"top",value:function(){return this.height+this.position().y}},{key:"height",get:function(){return this._height}}],[{key:"_createMesh",value:function(e,t,n,o){function i(e,t){return new THREE.Vector2(e,t)}var r,a=[],s=e,u=t,c=5;for(r=0;r<=c;r++)a.push(i(s,n*r/c));for(r=0;r<=c;r++)a.push(i(s+(u-s)*r/c,n));for(r=c;r>=0;r--)a.push(i(u,n*r/c));for(r=c;r>=0;r--)a.push(i(s+(u-s)*r/c,0));var h=new THREE.LatheGeometry(a,36),l=new THREE.MeshPhongMaterial({color:o,shininess:10});return l.side=THREE.DoubleSide,new THREE.Mesh(h,l)}}]),t}(a),u=function(e){function t(e,o,i,a){n(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t._createMesh(e,o,i)));return s.height=o,a&&s._addLabel(a),s._rings=[],s}return i(t,e),o(t,[{key:"top",value:function(){return this._rings.length?this._rings[this._rings.length-1].top():this.position().y-this.height/2}},{key:"pushRing",value:function(e){this._rings.push(e)}},{key:"popRing",value:function(){if(0==this._rings.length)throw new Error("No rings on pole!");return this._rings.pop()}},{key:"ringCount",value:function(){return this._rings.length}},{key:"_addToScene",value:function(e){this._label&&e.add(this._label)}},{key:"hideLabel",value:function(){this._label&&(this._label.visible=!1)}},{key:"showLabel",value:function(){this._label&&(this._label.visible=!0)}},{key:"_addLabel",value:function(e){var t=new THREE.SpriteMaterial({map:e,fog:!1}),n=new THREE.Sprite(t);e.generateMipmaps=!1,e.magFilter=THREE.NearestFilter,e.minFilter=THREE.NearestFilter,this._label=n}},{key:"_positionChanged",value:function(){if(this._label){var e=this.position();this._label.position.set(e.x,.4+this.height,e.z)}}}],[{key:"_createMesh",value:function(e,t,n){var o=new THREE.CylinderGeometry(e,e,t,32);n.wrapS=n.wrapT=THREE.RepeatWrapping,n.repeat.set(.41,.8);var i=new THREE.MeshBasicMaterial({map:n,overdraw:.5});return new THREE.Mesh(o,i)}}]),t}(a),c=function(e){function t(e,o){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t._createMesh(e,o)))}return i(t,e),o(t,null,[{key:"_createMesh",value:function(e,t){var n=new THREE.PlaneGeometry(e,e,10,10);t.wrapS=t.wrapT=THREE.RepeatWrapping,t.repeat.set(6,6);var o=new THREE.MeshBasicMaterial({map:t,overdraw:.5});o.side=THREE.DoubleSide;var i=new THREE.Mesh(n,o);return i.rotation.x=-Math.PI/2,i}}]),t}(a);THREE.OrbitControls=function(e,t){function n(){return 2*Math.PI/60/60*x.autoRotateSpeed}function o(){return Math.pow(.95,x.zoomSpeed)}function i(e){V.theta-=e}function r(e){V.phi-=e}function a(e){x.object instanceof THREE.PerspectiveCamera?F/=e:x.object instanceof THREE.OrthographicCamera?(x.object.zoom=Math.max(x.minZoom,Math.min(x.maxZoom,x.object.zoom*e)),x.object.updateProjectionMatrix(),Y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),x.enableZoom=!1)}function s(e){x.object instanceof THREE.PerspectiveCamera?F*=e:x.object instanceof THREE.OrthographicCamera?(x.object.zoom=Math.max(x.minZoom,Math.min(x.maxZoom,x.object.zoom/e)),x.object.updateProjectionMatrix(),Y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),x.enableZoom=!1)}function u(e){B.set(e.clientX,e.clientY)}function c(e){Q.set(e.clientX,e.clientY)}function h(e){K.set(e.clientX,e.clientY)}function l(e){G.set(e.clientX,e.clientY),X.subVectors(G,B);var t=x.domElement===document?x.domElement.body:x.domElement;i(2*Math.PI*X.x/t.clientWidth*x.rotateSpeed),r(2*Math.PI*X.y/t.clientHeight*x.rotateSpeed),B.copy(G),x.update()}function d(e){J.set(e.clientX,e.clientY),$.subVectors(J,Q),$.y>0?a(o()):$.y<0&&s(o()),Q.copy(J),x.update()}function m(e){W.set(e.clientX,e.clientY),q.subVectors(W,K),ne(q.x,q.y),K.copy(W),x.update()}function p(e){}function f(e){e.deltaY<0?s(o()):e.deltaY>0&&a(o()),x.update()}function E(e){switch(e.keyCode){case x.keys.UP:ne(0,x.keyPanSpeed),x.update();break;case x.keys.BOTTOM:ne(0,-x.keyPanSpeed),x.update();break;case x.keys.LEFT:ne(x.keyPanSpeed,0),x.update();break;case x.keys.RIGHT:ne(-x.keyPanSpeed,0),x.update()}}function v(e){B.set(e.touches[0].pageX,e.touches[0].pageY)}function b(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);Q.set(0,o)}function g(e){K.set(e.touches[0].pageX,e.touches[0].pageY)}function _(e){G.set(e.touches[0].pageX,e.touches[0].pageY),X.subVectors(G,B);var t=x.domElement===document?x.domElement.body:x.domElement;i(2*Math.PI*X.x/t.clientWidth*x.rotateSpeed),r(2*Math.PI*X.y/t.clientHeight*x.rotateSpeed),B.copy(G),x.update()}function T(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);J.set(0,i),$.subVectors(J,Q),$.y>0?s(o()):$.y<0&&a(o()),Q.copy(J),x.update()}function y(e){W.set(e.touches[0].pageX,e.touches[0].pageY),q.subVectors(W,K),ne(q.x,q.y),K.copy(W),x.update()}function w(e){}function R(e){if(x.enabled!==!1){if(e.preventDefault(),e.button===x.mouseButtons.ORBIT){if(x.enableRotate===!1)return;u(e),D=z.ROTATE}else if(e.button===x.mouseButtons.ZOOM){if(x.enableZoom===!1)return;c(e),D=z.DOLLY}else if(e.button===x.mouseButtons.PAN){if(x.enablePan===!1)return;h(e),D=z.PAN}D!==z.NONE&&(document.addEventListener("mousemove",H,!1),document.addEventListener("mouseup",k,!1),x.dispatchEvent(A))}}function H(e){if(x.enabled!==!1)if(e.preventDefault(),D===z.ROTATE){if(x.enableRotate===!1)return;l(e)}else if(D===z.DOLLY){if(x.enableZoom===!1)return;d(e)}else if(D===z.PAN){if(x.enablePan===!1)return;m(e)}}function k(e){x.enabled!==!1&&(p(e),document.removeEventListener("mousemove",H,!1),document.removeEventListener("mouseup",k,!1),x.dispatchEvent(N),D=z.NONE)}function M(e){x.enabled===!1||x.enableZoom===!1||D!==z.NONE&&D!==z.ROTATE||(e.preventDefault(),e.stopPropagation(),f(e),x.dispatchEvent(A),x.dispatchEvent(N))}function O(e){x.enabled!==!1&&x.enableKeys!==!1&&x.enablePan!==!1&&E(e)}function P(e){if(x.enabled!==!1){switch(e.touches.length){case 1:if(x.enableRotate===!1)return;v(e),D=z.TOUCH_ROTATE;break;case 2:if(x.enableZoom===!1)return;b(e),D=z.TOUCH_DOLLY;break;case 3:if(x.enablePan===!1)return;g(e),D=z.TOUCH_PAN;break;default:D=z.NONE}D!==z.NONE&&x.dispatchEvent(A)}}function S(e){if(x.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(x.enableRotate===!1)return;if(D!==z.TOUCH_ROTATE)return;_(e);break;case 2:if(x.enableZoom===!1)return;if(D!==z.TOUCH_DOLLY)return;T(e);break;case 3:if(x.enablePan===!1)return;if(D!==z.TOUCH_PAN)return;y(e);break;default:D=z.NONE}}function L(e){x.enabled!==!1&&(w(e),x.dispatchEvent(N),D=z.NONE)}function C(e){e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return U.phi},this.getAzimuthalAngle=function(){return U.theta},this.reset=function(){x.target.copy(x.target0),x.object.position.copy(x.position0),x.object.zoom=x.zoom0,x.object.updateProjectionMatrix(),x.dispatchEvent(j),x.update(),D=z.NONE},this.update=function(){var t=new THREE.Vector3,o=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),r=o.clone().inverse(),a=new THREE.Vector3,s=new THREE.Quaternion;return function(){var e=x.object.position;return t.copy(e).sub(x.target),t.applyQuaternion(o),U.setFromVector3(t),x.autoRotate&&D===z.NONE&&i(n()),U.theta+=V.theta,U.phi+=V.phi,U.theta=Math.max(x.minAzimuthAngle,Math.min(x.maxAzimuthAngle,U.theta)),U.phi=Math.max(x.minPolarAngle,Math.min(x.maxPolarAngle,U.phi)),U.makeSafe(),U.radius*=F,U.radius=Math.max(x.minDistance,Math.min(x.maxDistance,U.radius)),x.target.add(Z),t.setFromSpherical(U),t.applyQuaternion(r),e.copy(x.target).add(t),x.object.lookAt(x.target),x.enableDamping===!0?(V.theta*=1-x.dampingFactor,V.phi*=1-x.dampingFactor):V.set(0,0,0),F=1,Z.set(0,0,0),!!(Y||a.distanceToSquared(x.object.position)>I||8*(1-s.dot(x.object.quaternion))>I)&&(x.dispatchEvent(j),a.copy(x.object.position),s.copy(x.object.quaternion),Y=!1,!0)}}(),this.dispose=function(){x.domElement.removeEventListener("contextmenu",C,!1),x.domElement.removeEventListener("mousedown",R,!1),x.domElement.removeEventListener("wheel",M,!1),x.domElement.removeEventListener("touchstart",P,!1),x.domElement.removeEventListener("touchend",L,!1),x.domElement.removeEventListener("touchmove",S,!1),document.removeEventListener("mousemove",H,!1),document.removeEventListener("mouseup",k,!1),window.removeEventListener("keydown",O,!1)};var x=this,j={type:"change"},A={type:"start"},N={type:"end"},z={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},D=z.NONE,I=1e-6,U=new THREE.Spherical,V=new THREE.Spherical,F=1,Z=new THREE.Vector3,Y=!1,B=new THREE.Vector2,G=new THREE.Vector2,X=new THREE.Vector2,K=new THREE.Vector2,W=new THREE.Vector2,q=new THREE.Vector2,Q=new THREE.Vector2,J=new THREE.Vector2,$=new THREE.Vector2,ee=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),Z.add(e)}}(),te=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),Z.add(e)}}(),ne=function(){var e=new THREE.Vector3;return function(t,n){var o=x.domElement===document?x.domElement.body:x.domElement;if(x.object instanceof THREE.PerspectiveCamera){var i=x.object.position;e.copy(i).sub(x.target);var r=e.length();r*=Math.tan(x.object.fov/2*Math.PI/180),ee(2*t*r/o.clientHeight,x.object.matrix),te(2*n*r/o.clientHeight,x.object.matrix)}else x.object instanceof THREE.OrthographicCamera?(ee(t*(x.object.right-x.object.left)/x.object.zoom/o.clientWidth,x.object.matrix),te(n*(x.object.top-x.object.bottom)/x.object.zoom/o.clientHeight,x.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),x.enablePan=!1)}}();x.domElement.addEventListener("contextmenu",C,!1),x.domElement.addEventListener("mousedown",R,!1),x.domElement.addEventListener("wheel",M,!1),x.domElement.addEventListener("touchstart",P,!1),x.domElement.addEventListener("touchend",L,!1),x.domElement.addEventListener("touchmove",S,!1),window.addEventListener("keydown",O,!1),this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var h=function(){function e(){n(this,e),this._accumulated=0,this._startTime=this._now(),this._paused=!1}return o(e,[{key:"startStop",value:function(){return this._paused?(this._startTime=this._now(),this._paused=!1):(this._accumulated+=this._now()-this._startTime,this._paused=!0),!this._paused}},{key:"isPaused",value:function(){return this._paused}},{key:"time",value:function(){return this._paused?this._accumulated:this._accumulated+(this._now()-this._startTime)}},{key:"_now",value:function(){return(new Date).valueOf()}}]),e}(),l=function(){function e(t,o,i,r){var a=this;n(this,e),this._fromPole=t,this._toPole=o,this._ring=i,this._speed=r||1.5,this._timeSource=new h,this._startMilis=this._currentTimeMilis(),this._durationMilis=3e3/this._speed,this._fromHeight=t.top(),this._toHeight=o.top();var s=e.HEIGHT-this._fromHeight,u=this._distance(t,o),c=e.HEIGHT-this._toHeight,l=s+u+c;this._horizontalMoveStartTime=this._durationMilis*s/l,this._downMoveStartTime=this._durationMilis*(s+u)/l,this._promiseResolved=!1,this.completed=new Promise(function(e){a._resolve=e})}return o(e,null,[{key:"HEIGHT",get:function(){return 2}}]),o(e,[{key:"startStop",value:function(){return this._timeSource.startStop()}},{key:"update",value:function(){var t=this;if(this._timeSource.isPaused())return!0;var n=this._currentTimeMilis()-this._startMilis;if(n>this._durationMilis){var o=this._toPole.position(),i=o.x,r=o.z;if(this._ring.position(i,this._toHeight,r),this._promiseResolved)return!1;!function(){var e=t;t._resolve({end:function(){e._promiseResolved=!0}})}()}else if(n>this._downMoveStartTime){var a=this._interpolate(n-this._downMoveStartTime,this._durationMilis-this._downMoveStartTime),s=(e.HEIGHT-this._toHeight)*a,u=e.HEIGHT-s,c=this._toPole.position(),h=c.x,l=c.z;this._ring.position(h,u,l)}else if(n>this._horizontalMoveStartTime){var d=this._fromPole.position(),m=d.x,p=d.z,f=this._toPole.position(),E=f.x,v=f.z,b=this._interpolate(n-this._horizontalMoveStartTime,this._downMoveStartTime-this._horizontalMoveStartTime),g=(E-m)*b+m,_=(v-p)*b+p;this._ring.position(g,e.HEIGHT,_)}else{var T=this._interpolate(n,this._horizontalMoveStartTime),y=(e.HEIGHT-this._fromHeight)*T,w=this._fromHeight+y,R=this._fromPole.position(),H=R.x,k=R.z;this._ring.position(H,w,k)}return!0}},{key:"_interpolate",value:function(e,t){e=Math.min(e,t);var n=-Math.PI/2+Math.PI*e/t;return.5*(Math.sin(n)+1)}},{key:"_distance",value:function(e,t){var n=e.position(),o=n.x,i=n.z,r=t.position(),a=r.x,s=r.z;return Math.sqrt((a-o)*(a-o)+(s-i)*(s-i))}},{key:"_currentTimeMilis",value:function(){return this._timeSource.time()}}]),e}(),d=[t].map(regeneratorRuntime.mark),m=3,p=1,f=function(){function i(e,t){n(this,i),this._setupThreeJs(e,t),this._setupCamera(e,t),this._setupOrbitControls(),this.scene=new THREE.Scene,this.loader=new THREE.TextureLoader,this.showLabels=!0,this._discCount=m,this._animationSpeedMultiplier=1,this.reset()}return o(i,[{key:"reset",value:function(){var e=this;this._initialized=!1,this.from=this.to=this.using=null,this.scene.children.slice().forEach(function(t){return e.scene.remove(t)}),this._animation={started:!1,update:function(){return!this.started},startStop:function(){return this.started=!0,!0}},this._hanoiMoves=[].entries(),this._setupLights(),this._buildScene()}},{key:"setNumberOfDisks",value:function(e){this._discCount=e}},{key:"setAnimationSpeedMultiplier",value:function(e){this._animationSpeedMultiplier=e}},{key:"setShowLabels",value:function(e){this.showLabels=e,[this.from,this.to].forEach(function(t){t&&(e?t.showLabel():t.hideLabel())})}},{key:"startStop",value:function(){return this._animation.startStop()}},{key:"moveRing",value:function(e,t){e=this._numberToPole(e),t=this._numberToPole(t);var n=e.popRing();this._animation=new l(e,t,n,p*this._animationSpeedMultiplier),this._animation.completed.then(function(e){t.pushRing(n),e.end()})}},{key:"_nextAnimationMove",value:function(){var e=this._hanoiMoves.next();if(!e.done){var t=e.value;this.moveRing(t.from,t.to)}}},{key:"_numberToPole",value:function(e){switch(e){case 1:return this.from;case 2:return this.using;case 3:return this.to;default:throw new Error("invalid pole number: "+e)}}},{key:"_setupThreeJs",value:function(e,t){var n=new THREE.WebGLRenderer({antialias:!0});n.setSize(e,t),n.setPixelRatio(window.devicePixelRatio),this.renderer=n}},{key:"_setupCamera",value:function(e,t){var n=new THREE.PerspectiveCamera(60,e/t,.1,1e3);n.position.set(0,4,4),n.up=new THREE.Vector3(0,1,0),n.lookAt(new THREE.Vector3(0,0,0)),this.camera=n}},{key:"_setupTrackballControls",value:function(){var e=this,t=new THREE.TrackballControls(this.camera);t.rotateSpeed=2.5,t.zoomSpeed=.2,t.panSpeed=.2,t.noZoom=!1,t.noPan=!1,t.staticMoving=!0,t.dynamicDampingFactor=.3,t.addEventListener("change",function(){return e._render()}),this.controls=t}},{key:"_setupOrbitControls",value:function(){var e=new THREE.OrbitControls(this.camera,this.renderer.domElement);e.enableDamping=!0,e.dampingFactor=.15,e.enableZoom=!0,e.rotateSpeed=.3,this.controls=e}},{key:"_setupLights",value:function(){var e=new THREE.DirectionalLight(13421772);e.position.set(0,1,1).normalize(),this.scene.add(e),e=new THREE.AmbientLight(10526880),this.scene.add(e)}},{key:"_buildScene",value:function(){var e=this;this.loader.load("images/floor.jpg",function(t){var n=new c(8,t);n.addToScene(e.scene),n.position(0,-.01,0)});var t=function(t,n,o,i,r){var a=.05,s=1.2;return e._loadTexture(r).then(function(r){var c=new u(a,s,i,r);return c.addToScene(t),c.position(n,s/2,o),e.showLabels?c.showLabel():c.hideLabel(),c})},n=2,o=-Math.sqrt(3)*n/2;this.loader.load("images/wood.jpg",function(n){t(e.scene,0,o/2,n).then(function(t){return e.using=t})}),this.loader.load("images/wood.jpg",function(i){t(e.scene,n/2,-o/2,i,"images/to_sprite.png").then(function(t){return e.to=t})}),this._loadTexture("images/wood.jpg").then(function(i){return t(e.scene,-n/2,-o/2,i,"images/from_sprite.png")}).then(function(t){e.from=t,e._createRings(),e._setupAlgorithm(),e._initialized=!0})}},{key:"_createRings",value:function(){var t=this,n=e(this._discCount),o=this.from.position(),i=0;n.reverse().forEach(function(e){e.position(o.x,i,o.z),e.addToScene(t.scene),t.from.pushRing(e),i+=e.height})}},{key:"_setupAlgorithm",value:function(){this._hanoiMoves=t(this.from.ringCount(),{from:1,to:3,using:2})}},{key:"_loadTexture",value:function(e){var t=this;return e?new Promise(function(n,o){t.loader.load(e,function(e){return n(e)},function(){},function(){return o("cannot load texture: "+e)})}):Promise.resolve(null)}},{key:"_render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){this.controls.update(),this._initialized&&!this._animation.update()&&this._nextAnimationMove(),this._render()}}]),i}(),E=800,v=640;document.addEventListener("DOMContentLoaded",function(){function e(){t.render(),requestAnimationFrame(e)}var t=new f(E,v),n=function(){t.reset(),i.innerHTML="START"},o=document.getElementById("showLabelsCheckbox");o.addEventListener("change",function(){t.setShowLabels(o.checked)});var i=document.getElementById("startStopButton");i.addEventListener("click",function(){var e=t.startStop();i.innerHTML=e?"PAUSE":"START"}),document.getElementById("resetButton").addEventListener("click",function(){n()}),document.getElementById("numberOfDisks").addEventListener("change",function(e){var o=e.target.value;t.setNumberOfDisks(o),n()}),document.getElementById("animationSpeed").addEventListener("change",function(e){var n=e.target.value,o=[.3,.5,.75,1,1.5,3,5];t.setAnimationSpeedMultiplier(o[n])}),e();var r=document.getElementById("scene");if(!r)throw new Error("scene HTML element not found!");r.appendChild(t.renderer.domElement)})}();